<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.repository.follow.FollowMapper">

<resultMap id="userMap" type="com.example.domain.user.User" autoMapping="true">
    <result property="name" column="name" />
  </resultMap>

<resultMap id="followingMap" type="com.example.domain.follow.Follow" autoMapping="true">
    <result property="followedId" column="followed_id" />
    <association property="user" resultMap="userMap"/>
  </resultMap>

	<!-- フォロー機能 -->
	<select id="findFollowingList" resultMap="followingMap">
		SELECT
			u.name
		FROM
			follow AS f
		INNER JOIN
      		users AS u
    	ON
    		f.followed_id = u.id
    	WHERE
     		f.following_id = #{followingId}
    	ORDER BY
    		f.following_id
	</select>
	
	<!-- フォロワー機能 -->
	<select id="findFollowedList" resultMap="followingMap">
	SELECT
			u.name
		FROM
			follow AS f
		INNER JOIN
      		users AS u
    	ON
    		f.following_id = u.id
    	WHERE
     		f.followed_id = #{followedId}
    	ORDER BY
    		f.followed_id
	</select>	
		




</mapper>
